<html>
    <head>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script async src="https://cdn.ampproject.org/v0.js"></script>
        <title>2DE1 Chat Room</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel = "stylesheet" href = "css/style.css">
        <link rel = "stylesheet" href = "css/bootstrap.css">
        <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
        <link rel="icon" type="image/img" href="bilder/meldinger.png">
        <script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
        <script src="jquery.js"></script>
        <script>
            
            var config = {
    apiKey: "AIzaSyAeOn-GRFv3HNG7Vqgfrp0xeeTMShpfW_Y",
    authDomain: "chattapp2de1.firebaseapp.com",
    databaseURL: "https://chattapp2de1.firebaseio.com",
    projectId: "chattapp2de1",
    storageBucket: "chattapp2de1.appspot.com",
    messagingSenderId: "456983802248"
            };
            firebase.initializeApp(config);

            var name = "";
            
            
            $(document).ready(function(){
                
                firebase.database().ref('chat/').on('child_added', function(snapshot){
                    var data = "<div id = 'm'><p class = 'name'>" + snapshot.child('name').val() + "</p><p class = 'message'>" + snapshot.child('message').val() + "</p></div>";

                    $("#messages").html($("#messages").html() + data);
                });
                
                $("#name_submit").on('click', function(){
                    name = $("#name").val();
                    $("#name_prompt_parent").fadeOut();
                    
                    firebase.database().ref('chat/' + Date.now()).set({
                        name: "",
                        message: "<i>" + name + " joined the chatroom</i>"
                    });
                }); 
                
                $("#send_button").on('click', function(){
                    var mess = $("#msg").val();
                    
                    firebase.database().ref('chat/' + Date.now()).set({
                        name: name,
                        message: mess
                    });
                    
                    $("#msg").val("");
                });
                
            });
            
        </script>
    </head>
    
    <body>
        <div class="w3-top w3-white">
  <div class="w3-bar w3-dark-blue" id="myNavbar">
        <div class="w3-dropdown-hover w3-">
        <button class="w3-xlarge w3-button w3-white">Skole</button>
        <div class ="w3-dropdown-content w3-bar-block w3-xlarge">
    <a href="https://fronter.com/mrvgs/" class="w3-xlarge w3-bar-item w3-button" target="_blank">Fronter</a>
        <a href="UkePlan.html" class="w3-xlarge w3-bar-item w3-button">Uke Plan</a>
        </div>
      </div>
    <a href="index.html" class="w3-xlarge w3-button w3-white">Hjem</a>
    </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium">
  </div>
    </div>
        <div id = "name_prompt_parent">
            <div id = "name_prompt">
                <p class = "title">Skriv inn et navn</p>
                <input type = "text" id = "name" class = "form-control">
                <br>
                <button id = "name_submit" class = "btn btn-success">Velg dette navnet</button>
            </div>
        </div>
        
        <div id = "chatroom">
            <div id = "messages">
                
            </div>
            <div id = "input">
                <textarea id = "msg" class = "form-control" id = "message"></textarea>
                <button id = "send_button" class = "btn btn-primary">Send</button>
            </div>
        </div>
    
    </body>
</html>